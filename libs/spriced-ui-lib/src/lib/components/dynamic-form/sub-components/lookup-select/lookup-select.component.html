<ng-container *ngIf="control.type === 'lookup-select' && visible">
  <div style="position: relative">
    <div class="flex flex-row grid grid-cols-4 space-x-1 justify-between items-center">
      <div class="col-span-1">
        <mat-label class="text-xs text-ellipsed" matTooltipClass="custom-tooltip" [matTooltip]="control.label">{{ control.label }}</mat-label>
      </div>
      <div class="col-span-3 flex gap-1" style="margin:0;">
        <ng-container *ngIf="totalCount <= pageSize">
          <mat-form-field class="flex-grow" appearance="outline" [ngClass]="frmControl.errors ? 'error' : ''"
            [floatLabel]="value ? 'always' : 'auto'">

            <mat-select class="flex items-center select-dropdown" matNativeControl (blur)="onTouched()"
              [(ngModel)]="value" [disabled]="control.readOnly || disabled" (click)="onClick()">
              <mat-option>
                <ngx-mat-select-search placeholderLabel="Search" ngModel
                  (ngModelChange)="filterSource($event)"></ngx-mat-select-search>
              </mat-option>
              <mat-option [value]="control.placeholder.value" *ngIf="control.placeholder">
                {{ control.placeholder.displayText }}
              </mat-option>

              <mat-option *ngFor="let option of filteredSource"
                [value]="control.valueProp ? option[control.valueProp] : option">
                {{ control.displayProp ? getDisplayProp(option) : option }}
              </mat-option>
            </mat-select>
            <mat-icon matSuffix *ngIf="control.icon">{{ control.icon }}</mat-icon>
            <mat-hint align="start" *ngIf="control.hint">{{
              control.hint
              }}</mat-hint>
          </mat-form-field>
        </ng-container>

        <ng-container *ngIf="totalCount > pageSize">
          <mat-form-field class="flex-grow h-8" appearance="outline" [ngClass]="frmControl.errors ? 'error' : ''"
            [floatLabel]="value ? 'always' : 'auto'">
            <!-- <div>{{ getSelectedDisplayProp() }}</div> -->
            <input matInput [value]="getSelectedDisplayProp()" />
            <input [style.display]="'none'" matInput [(ngModel)]="value" />
            <mat-icon matSuffix *ngIf="control.icon">{{ control.icon }}</mat-icon>
            <mat-hint align="start" *ngIf="control.hint">
              {{ control.hint }}</mat-hint>
          </mat-form-field>
        </ng-container>

        <button mat-raised-button *ngIf="totalCount > pageSize" color="primary" title="Edit" class="square-button"
          title="selectItem" (click)="openPopup()">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-raised-button color="primary" class="square-button" title="Clear" (click)="onClearClick()"
          [disabled]="control.readOnly || disabled">
          <mat-icon>close</mat-icon>
        </button>
        <button mat-raised-button color="primary" class="square-button" matTooltipClass="custom-tooltip"
          [matTooltip]="control.toolTipText!" (click)="onNavigateClick()" [disabled]="control.readOnly || disabled">
          <mat-icon>grid_on</mat-icon>
        </button>
      </div>
    </div>
    <!--Loader-->
    <div *ngIf="loading"
      class="bg-secondary-default opacity-40 top-0 bottom-0 left-0 right-0 absolute flex items-center justify-center">
      <div
        class="inline-block h-8 w-8 border-primary-dark animate-spin rounded-full border-4 border-solid m-16 border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"
        role="status">
        <span
          class="!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]">Loading...</span>
      </div>
    </div>
    <!--Loader-->
  </div>
  <ng-container>
    <sp-error *ngIf="frmControl.errors" [validations]="control.validations || []"
      [errors]="frmControl.errors"></sp-error>
    <!-- <div *ngIf="!frmControl.errors" style="visibility: hidden">*</div> -->
  </ng-container>
</ng-container>