<ng-container>
  <div
    style="width: 100%"
    class="w-full bg-primary-default h-10 rounded-t-md flex flex-row items-center justify-between pl-5 pr-5"
  >
    <span class="float-left text-white font-medium elipsis">{{ title }}</span>
    <div class="flex flex-row"><ng-content></ng-content></div>
  </div>
  <ngx-datatable
    style="height: calc(100% - 40px); overflow-y: hidden"
    #table
    class="material"
    [rows]="rows"
    [columnMode]="columnMode"
    [headerHeight]="headerHeight"
    [footerHeight]="footerHeight"
    [rowHeight]="rowHeight"
    [scrollbarV]="true"
    [virtualization]="virtualScroll"
    [scrollbarH]="true"
    [selectionType]="selectionType"
    [offset]="offset"
    (page)="onPaginate($event)"
    (select)="onSelect($event)"
    [externalSorting]="isExternalSorting"
    [sortType]="sortType"
    [selected]="!!selected?.length ? selected : []"
    [externalPaging]="isExternalPaging"
    [limit]="limit"
    [count]="count"
    (sort)="onSort($event)"
  >
    <ngx-datatable-column *ngIf="enableRowIndex" name="#">
      <ng-template
        let-rowIndex="rowIndex"
        let-row="row"
        ngx-datatable-cell-template
      >
        {{ rowIndex + 1 }}
      </ng-template>
    </ngx-datatable-column>
    <ng-container *ngFor="let header of headers; let i = index">
      <ngx-datatable-column
        [name]="header.name"
        [flexGrow]="header.flexGrow || 1"
        [frozenLeft]="header.pinned === 'left' ? true : false"
        [frozenRight]="header.pinned === 'right' ? true : false"
        [width]="header.width || 0"
        [resizeable]="true"
        [sortable]="true"
        [draggable]="true"
        [canAutoResize]="header.canAutoResize || true"
        *ngIf="!header.hidden"
      >
        <ng-template
          let-row="row"
          let-value="value"
          ngx-datatable-cell-template
        >
          <ng-container *ngIf="header?.isLink">
            <mat-icon
              class="cursor-pointer"
              onclick="window.open(`${ isArray
              ? this.renderData(row[i], header)
              : this.renderData(getData(row, header), header)}`,'blank')"
              >link</mat-icon
            >
          </ng-container>
          <ng-container *ngIf="!header?.isLink">
            <ng-container *ngIf="!header?.checkbox"
              >{{
                isArray
                  ? this.renderData(row[i], header)
                  : this.renderData(getData(row, header), header)
              }}
            </ng-container>

            <ng-container *ngIf="header?.tooltip">
              <img
                class="w-7 h-7 cursor-pointer"
                spToolTipRenderer
                [contentTemplate]="template"
                [src]="header?.imgsrc"
              />
              <ng-template #template>
                <div [innerHTML]="header?.tooltipTemplate(row)"></div>
              </ng-template>
            </ng-container>

            <ng-container *ngIf="header?.checkbox">
              <mat-checkbox
                color="primary"
                (change)="checkbox.emit({ value: $event, item: row })"
                [disabled]="header?.disableCheckbox(row)"
                [(ngModel)]="row[header.column]"
              >
              </mat-checkbox>
            </ng-container>
          </ng-container>
        </ng-template>
      </ngx-datatable-column>
    </ng-container>

    <ngx-datatable-footer *ngIf="true">
      <ng-template
        ngx-datatable-footer-template
        let-rowCount="rowCount"
        let-pageSize="pageSize"
        let-selectedCount="selectedCount"
        let-curPage="curPage"
        let-offset="offset"
      >
        <div style="padding: 5px 10px">
          <div>
            Rows: {{ rowCount !== "NaN" ? rowCount : 0 }} | Page Size:
            {{ pageSize !== "NaN" ? pageSize : 0 }} | Current Page:
            {{ curPage !== "NaN" ? curPage : 0 }}
          </div>
        </div>
        <datatable-pager
          [pagerLeftArrowIcon]="'datatable-icon-left'"
          [pagerRightArrowIcon]="'datatable-icon-right'"
          [pagerPreviousIcon]="'datatable-icon-prev'"
          [pagerNextIcon]="'datatable-icon-skip'"
          [page]="curPage"
          [size]="pageSize"
          [count]="rowCount"
          [hidden]="!(rowCount / pageSize > 1)"
          (change)="table.onFooterPage($event)"
        >
        </datatable-pager>
      </ng-template>
    </ngx-datatable-footer>
  </ngx-datatable>
</ng-container>
